## 1\. 指标说明

### 销售额（sales_amount）

- **含义**：部门或产品在特定时间段的销售收入

- **用途**：衡量业务收入，分析部门、产品、时间维度表现

- **SQL 映射**：`SUM(sales_amount)`

- **示例 SQL**：

`SELECT SUM(sales_amount) FROM sales;`

### 总销售额（total_sales）

- **含义**：在某个维度下销售额汇总

- **SQL 示例**：

`SELECT SUM(sales_amount) FROM sales;`

### 平均销售额（avg_sales）

- **含义**：平均销售额

- **SQL 示例**：

`SELECT AVG(sales_amount) FROM sales;`

### 同比（YoY）

- **含义**：与上一年同期对比

- **SQL 示例**：

`SELECT dept_id, SUM(CASE WHEN sales_date BETWEEN '2024-01-01' AND '2024-12-31' THEN sales_amount ELSE 0 END) AS this_year, SUM(CASE WHEN sales_date BETWEEN '2023-01-01' AND '2023-12-31' THEN sales_amount ELSE 0 END) AS last_year FROM sales WHERE sales_date BETWEEN '2023-01-01' AND '2024-12-31' GROUP BY dept_id;`

### 环比（MoM）

- **含义**：本月销售额与上月对比

- **SQL 示例**：

`WITH monthly_sales AS ( SELECT dept_id, DATE_FORMAT(sales_date, '%Y-%m') AS month, SUM(sales_amount) AS total_sales FROM sales GROUP BY dept_id, month ) SELECT dept_id, month, total_sales AS this_month, LAG(total_sales) OVER (PARTITION BY dept_id ORDER BY month) AS last_month FROM monthly_sales ORDER BY dept_id, month;`

### 占比（ratio）

- **含义**：某部门/产品销售额占总销售额比例

- **SQL 示例**：

`SELECT dept_id, SUM(sales_amount)/ (SELECT SUM(sales_amount) FROM sales) as ratio FROM sales GROUP BY dept_id;`

-

## 2\. 维度说明

| 维度     | 字段         | 描述                                               |
| -------- | ------------ | -------------------------------------------------- |
| 部门     | dept_name    | 部门名称，如市场部、技术部、销售部、客服部         |
| 产品     | product_name | 产品名称，如产品 A、产品 B、产品 C、产品 D、产品 E |
| 产品类别 | category     | 产品类别，如软件、硬件、服务                       |
| 时间     | sales_date   | 销售日期，可按年、季度、月、周分析                 |

## 3\. 常用 SQL 映射示例

### 各部门销售额

`SELECT d.dept_name, SUM(s.sales_amount) FROM sales s JOIN dept d ON s.dept_id=d.dept_id GROUP BY d.dept_name;`

### 每月销售趋势

`SELECT DATE_FORMAT(sales_date,'%Y-%m') AS month, SUM(sales_amount) FROM sales GROUP BY DATE_FORMAT(sales_date,'%Y-%m') ORDER BY month;`

### 各产品销售额

`SELECT p.product_name, SUM(s.sales_amount) FROM sales s JOIN product p ON s.product_id=p.product_id GROUP BY p.product_name;`

### 各产品类别销售额占比

`SELECT p.category, SUM(s.sales_amount) FROM sales s JOIN product p ON s.product_id=p.product_id GROUP BY p.category;`

### 部门同比增长

`WITH sales_current AS ( SELECT dept_id, SUM(sales_amount) AS this_year FROM sales WHERE sales_date BETWEEN '2024-01-01' AND '2024-12-31' GROUP BY dept_id ), sales_last AS ( SELECT dept_id, SUM(sales_amount) AS last_year FROM sales WHERE sales_date BETWEEN '2023-01-01' AND '2023-12-31' GROUP BY dept_id ) SELECT c.dept_id, c.this_year, l.last_year FROM sales_current c JOIN sales_last l ON c.dept_id = l.dept_id;`

## 4\. 业务解读

- **部门绩效分析**：分析总销售额、同比、环比、占比，找出贡献最大的部门

- **产品结构分析**：分析产品和类别销售额及占比，识别热销产品

- **趋势分析**：按月汇总绘制折线图，分析波峰波谷，发现销售高峰期

- **异常分析**：同比环比异常检测，发现业绩异常部门或产品

- **决策参考**：基于分析结果调整资源分配、营销策略和产品结构

-

## 5\. 示例问题映射

| 问题                 | 涉及维度              | SQL 示例                        | 业务解读                         |
| -------------------- | --------------------- | ------------------------------- | -------------------------------- |
| 上半年各部门销售额   | dept, sales_date      | SUM 按 dept 分组                | 找出贡献最大的部门，分析部门占比 |
| 各产品销售额占比     | product, category     | SUM 按 product/category 分组    | 判断热销产品与类别结构           |
| 哪个部门同比增长最快 | dept, sales_date      | JOIN 同比表                     | 分析增长最快的部门，辅助决策     |
| 每月销售趋势         | sales_date            | 按月 SUM                        | 绘制趋势图，分析季节性波动       |
| 产品类别销售结构     | category              | SUM 按 category                 | 优化产品结构，调整战略           |
| 环比销售下降的部门   | dept, sales_date      | JOIN 环比表                     | 找出下降部门，分析原因           |
| 热销产品排行         | product, sales_amount | ORDER BY SUM(sales_amount) DESC | 确定重点推广产品                 |
| 部门占比变化趋势     | dept, sales_date      | SUM + ratio                     | 分析部门占比变化，辅助资源调配   |
